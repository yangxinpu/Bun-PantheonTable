
# 🧙 Avalon Online Server

基于 **Bun + Elysia + MySQL** 的阿瓦隆（The Resistance: Avalon）桌游在线对战服务端项目。

本项目专注于 **多人桌游后端架构设计、状态管理、实时通信与工程化实践**，适合作为个人技术项目或学习型开源项目。

---

## 📖 项目简介

阿瓦隆是一款经典的阵营推理桌游，具有隐藏身份、多阶段流程和强一致性要求。

本项目旨在实现一个 **结构清晰、可扩展、可维护** 的阿瓦隆在线对战服务端，支持用户系统、房间系统、游戏流程控制及对局数据统计。

游戏规则参考：
- https://zhuanlan.zhihu.com/p/685062276

---

## 🎯 项目目标

- 提供稳定、高性能的 HTTP / WebSocket 服务
- 支持用户注册、登录与基础数据统计
- 支持房间创建与玩家管理
- 实现完整阿瓦隆游戏流程
- 记录对局结果与胜率
- 提供清晰、中文化的日志系统

---

## 🛠 技术栈

| 技术 | 说明 |
|---|---|
| Bun | 高性能 JavaScript 运行时 |
| Elysia | 轻量、高性能 Web 框架 |
| TypeScript | 强类型支持 |
| MySQL | 关系型数据库 |
| WebSocket | 实时游戏通信（规划中） |

---


## 🧩 已规划的核心功能

### 👤 用户系统

* 用户创建
* 基础信息管理
* 登录状态记录
* 胜率 / 对局数统计

数据库字段示例：

* username
* email
* avatar
* total_games
* win_rate
* last_login_time
* last_login_ip
* status

---

### 🏠 房间系统（规划中）

* 创建房间
* 加入 / 离开房间
* 房主控制
* 房间状态同步

---

### 🎲 游戏流程（规划中）

* 身份随机分配
* 队长轮换
* 任务投票
* 任务执行
* 刺杀阶段
* 胜负判定

---

## 📊 日志系统

当前实现：

* 请求开始日志（中文）
* 请求错误日志（中文）
* 支持 IP / 方法 / 路径 / 错误信息

日志示例：

```text
📥【请求开始】 POST /users/create
❌【请求错误】 TypeError: Cannot read properties of undefined
```

---

## 🧪 开发环境

### 环境要求

* Bun >= 1.x
* MySQL >= 8.x
* Node.js（仅用于工具链，可选）

---

### 安装依赖

```bash
bun install
```

---

### 启动项目

```bash
bun run src/index.ts
```

---

## 📌 当前状态

* [x] 项目初始化
* [x] 数据库设计（用户表）
* [x] MySQL 连接
* [x] 基础用户接口
* [x] 请求 / 错误日志
* [ ] 房间系统
* [ ] WebSocket 实时通信
* [ ] 游戏状态机
* [ ] 对局记录与复盘

---

## 🚀 后续规划

* WebSocket 游戏通信
* 观战模式
* 对局回放
* 行为日志分析
* 前端项目对接
* Docker 部署

---

## 📄 License

MIT License

---

## 🙋‍♂️ 关于作者

一个专注于 **前端 & Node/Bun 后端** 的开发者，
通过该项目深入实践：

* 游戏后端架构
* 状态管理
* 实时通信
* TypeScript 工程化

欢迎交流与建议。

